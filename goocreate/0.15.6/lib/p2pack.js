goo.P2Component=function(o){"use strict";function t(t){o.apply(this,arguments),this.type="P2Component",this.settings=t||{},this.mass=void 0!==t.mass?t.mass:0,this.linearDamping=void 0!==t.linearDamping?t.linearDamping:0,this.angularDamping=void 0!==t.angularDamping?t.angularDamping:0,this.shapes=void 0!==t.shapes?t.shapes:[],this.scale=void 0!==t.scale?t.scale:1,this.offsetX=void 0!==t.offsetX?t.offsetX:0,this.offsetY=void 0!==t.offsetY?t.offsetY:0,this.offsetZ=void 0!==t.offsetZ?t.offsetZ:0,this.offsetAngleX=void 0!==t.offsetAngleX?t.offsetAngleX:0,this.offsetAngleY=void 0!==t.offsetAngleY?t.offsetAngleY:0,this.offsetAngleZ=void 0!==t.offsetAngleZ?t.offsetAngleZ:0}return t.prototype=Object.create(o.prototype),t.prototype.constructor=t,t}(goo.Component),goo.P2System=function(o){"use strict";function t(t){o.call(this,"P2System",["P2Component","TransformComponent"]),t=t||{},this.world=new n.World({gravity:t.gravity||[0,-9.82]}),this.stepFrequency=t.stepFrequency||60}function e(o,t){var e=t.body.position,n=t.scale;o.transform.translation.setDirect(e[0]*n,e[1]*n,0),o.transform.rotation.fromAngles(t.offsetAngleX,t.offsetAngleY,t.offsetAngleZ+t.body.angle),o.setUpdated()}var n=window.p2;return t.prototype=Object.create(o.prototype),t.prototype.constructor=t,t.prototype.inserted=function(o){for(var t=o.p2Component,s=o.transformComponent,a=new n.Body({mass:t.mass,damping:t.damping,angularDamping:t.angularDamping}),a=t.body=new n.Body({mass:t.mass,position:[s.transform.translation.x,s.transform.translation.y]}),r=0;r<t.shapes.length;r++){var i,p=t.shapes[r];switch(p.type){case"box":i=new n.Rectangle(p.width,p.height);break;case"circle":i=new n.Circle(p.radius);break;case"plane":i=new n.Plane;break;default:throw new Error("p2 shape '"+p.type+"' not recognized")}a.addShape(i,p.offset,p.angle)}t.body=a,e(s,t),this.world.addBody(a)},t.prototype.deleted=function(o){var t=o.p2Component;t&&this.world.removeBody(t.body)},t.prototype.process=function(o){this.world.step(1/this.stepFrequency);for(var t=0;t<o.length;t++){var n=o[t],s=n.p2Component;e(n.transformComponent,s)}},t}(goo.System),"function"==typeof require&&(define("goo/addons/p2pack/P2Component",[],function(){return goo.P2Component}),define("goo/addons/p2pack/P2System",[],function(){return goo.P2System}));